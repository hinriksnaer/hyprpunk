#!/usr/bin/env fish
# Fedpunk CLI - Thin wrapper that delegates to the new modular CLI
# The actual dispatcher lives at $FEDPUNK_ROOT/bin/fedpunk

# Set FEDPUNK_ROOT if not already set
if not set -q FEDPUNK_ROOT
    if test -L ~/.local/share/fedpunk
        set -gx FEDPUNK_ROOT (readlink -f ~/.local/share/fedpunk)
    else if test -d ~/.local/share/fedpunk
        set -gx FEDPUNK_ROOT ~/.local/share/fedpunk
    else
        printf "Error: FEDPUNK_ROOT not found\n" >&2
        exit 1
    end
end

# Delegate to the new modular dispatcher
exec $FEDPUNK_ROOT/bin/fedpunk $argv

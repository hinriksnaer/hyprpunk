#!/usr/bin/env fish
# Claude Code install and setup
# Handles: Installation via curl and migration

# Install Claude Code using the official installer
if not command -v claude >/dev/null 2>&1
    echo "Installing Claude Code..."
    curl -fsSL https://claude.ai/install.sh | bash

    if test $status -eq 0
        echo "✓ Claude Code installed successfully"
    else
        echo "✗ Claude Code installation failed"
        exit 1
    end
else
    echo "✓ Claude already installed"
end

# Migrate Claude Code installer if needed
echo "Migrating Claude Code installer..."
claude --migrate-installer

if test $status -eq 0
    echo "✓ Claude Code installer migrated successfully"
else
    echo "⚠ Claude Code migration failed or not needed"
end

#!/usr/bin/env fish
# List all available themes in the themes directory
# Usage: hyprpunk-theme-list

# Find themes directory - look in active profile
if test -L "$HOME/.local/share/fedpunk/.active-config"
    # Use active profile's themes
    set active_profile (readlink -f "$HOME/.local/share/fedpunk/.active-config")
    set themes_dir "$active_profile/themes"
else if test -n "$FEDPUNK_USER"
    # Fallback to FEDPUNK_USER
    set themes_dir "$FEDPUNK_USER/.active-config/themes"
else
    # Try to find relative to script location (for running from repo)
    set script_dir (dirname (status -f))
    set themes_dir (realpath "$script_dir/../../themes")
end

# Check if themes directory exists
if not test -d "$themes_dir"
    echo "Error: Themes directory not found" >&2
    exit 1
end

# List all themes in the directory
for theme_dir in $themes_dir/*/
    # Skip if not a directory
    test -d "$theme_dir"; or continue

    # Get basename and output
    basename "$theme_dir"
end | sort
